---
- name: Gathering Job Responses
  hosts: all
  vars:
    ansible_python_interpreter: /QOpenSys/pkgs/bin/python3
  collections:
    - ibm.power_ibmi
  connection: ssh
  gather_facts: true
  tasks:

    # - name: list all the ethernet port information
    #   ibmi_sql_query:
    #     sql: "SELECT JOB_NAME_SHORT,JOB_STATUS FROM TABLE(QSYS2.ACTIVE_JOB_INFO()) B WHERE JOB_NAME_SHORT = 'QDBSRV01' AND JOB_STATUS = 'EVTW'"

      - name: CMD
        ibmi_cl_command:
          cmd: "system 'wrkactjob' | grep QSYSARB4"
        register: cmd_output

      - name: debug
        debug:
          msg: |
            "{{ cmd_output }}"